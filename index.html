<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Последнее письмо</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Georgia', serif;
            background: #111111;
            color: #cccccc;
            line-height: 1.6;
            overflow: hidden;
            touch-action: pan-y;
            height: 100vh;
            width: 100vw;
        }

        .scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px 15px;
            text-align: left;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        .scene.active {
            display: flex;
            opacity: 1;
        }

        .title {
            font-size: 1.8em;
            margin-bottom: 25px;
            font-weight: normal;
            text-align: center;
            width: 100%;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s ease-out 0.5s forwards;
            line-height: 1.3;
            color: #aaaaaa;
        }

        .text {
            font-size: 1.1em;
            margin: 12px 0;
            width: 100%;
            text-align: left;
            padding: 8px 5px;
            opacity: 0;
            transform: translateY(15px);
            animation: fadeInUp 1s ease-out forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .divider {
            width: 100%;
            height: 1px;
            background: linear-gradient(to right, transparent, #444444, transparent);
            margin: 20px 0;
            opacity: 0;
            animation: fadeIn 1s ease-out 1.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .tear {
            position: absolute;
            font-size: 1.2em;
            opacity: 0;
            animation: tearFall 3s ease-in forwards;
            pointer-events: none;
            z-index: -1;
            color: #88aaff;
        }

        @keyframes tearFall {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.5);
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) scale(1);
            }
        }

        .letter-effect {
            position: relative;
            max-width: 600px;
            padding: 20px;
            background: rgba(20, 20, 20, 0.3);
            border-left: 2px solid #444444;
        }

        .final-scene {
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-direction: column;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 10, 0.95);
        }

        .final-scene.active {
            display: flex;
            animation: finalAppear 2s ease-out;
        }

        @keyframes finalAppear {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .epitaph {
            font-size: 1.5em;
            color: #888888;
            margin-top: 30px;
            font-style: italic;
            opacity: 0;
            animation: epitaphFade 3s ease-out 2s forwards;
        }

        @keyframes epitaphFade {
            to { opacity: 1; }
        }

        .note {
            position: fixed;
            bottom: 20px;
            width: 100%;
            text-align: center;
            font-size: 0.9em;
            color: #666666;
            padding: 10px;
            opacity: 0;
            animation: noteAppear 2s ease-out 4s forwards;
        }

        @keyframes noteAppear {
            to { opacity: 0.7; }
        }

        /* Элементы управления */
        .progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 2px;
            background: #444444;
            z-index: 1000;
            transition: width 0.3s ease;
        }

        .scene-counter {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 0.9em;
            color: #666666;
            z-index: 1000;
        }

        .swipe-hint {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8em;
            color: #555555;
            text-align: center;
            z-index: 1000;
            animation: pulseHint 3s ease-in-out infinite;
        }

        @keyframes pulseHint {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        /* Адаптация */
        @media (min-width: 768px) {
            .scene {
                padding: 30px 40px;
            }
            .title {
                font-size: 2em;
            }
            .text {
                font-size: 1.2em;
            }
            .letter-effect {
                padding: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="progress" id="progress"></div>
    <div class="scene-counter" id="sceneCounter">1/8</div>
    <div class="swipe-hint">Касайтесь экрана для продолжения</div>
    
    <div id="tearsContainer"></div>

    <!-- Сцена 1 -->
    <div class="scene active" id="scene1">
        <div class="letter-effect">
            <h1 class="title">Мое последнее письмо</h1>
            <div class="text" style="animation-delay: 1s">Анастасия, если ты читаешь это, значит меня уже нет в живых.</div>
            <div class="text" style="animation-delay: 2s">Не ищи причин и не вини себя. Это был мой выбор.</div>
        </div>
    </div>

    <!-- Сцена 2 -->
    <div class="scene" id="scene2">
        <div class="letter-effect">
            <div class="text" style="animation-delay: 0.5s">Я хотел бы, чтобы ты помнила наши светлые моменты.</div>
            <div class="text" style="animation-delay: 1.5s">Но не те, которые причинили тебе боль...</div>
            <div class="text" style="animation-delay: 2.5s">Наш первый поцелуй в моей комнате...</div>
            <div class="text" style="animation-delay: 3.5s">Летние ночи, когда мы разговаривали до утра.</div>
        </div>
    </div>

    <!-- Сцена 3 -->
    <div class="scene" id="scene3">
        <div class="letter-effect">
            <div class="text" style="animation-delay: 0.5s">Ты была самым важным человеком в моей жизни.</div>        
            <div class="text" style="animation-delay: 1.5s">Когда у меня была депрессия, ты держала меня на плаву.</div>
            <div class="text" style="animation-delay: 2.5s">Ты буквально спасала меня, когда я сам не мог.</div>
            <div class="text" style="animation-delay: 3.5s">И за это я буду благодарен тебе вечность.</div>
        </div>
    </div>

    <!-- Сцена 4 -->
    <div class="scene" id="scene4">
        <div class="letter-effect">
            <div class="text" style="animation-delay: 0.5s">Я знаю, что я причиняю тебе слишком много боли</div>
            <div class="text" style="animation-delay: 1.5s">Из-за ерунды, из-за глупостей...</div>
            <div class="text" style="animation-delay: 2.5s">Но хочу, чтобы ты знала - я всегда любил тебя и унесу любовь свою навечно.</div>
            <div class="text" style="animation-delay: 3.5s">Даже когда злился, даже когда обижался как девочка.</div>
        </div>
    </div>

    <!-- Сцена 5 -->
    <div class="scene" id="scene5">
        <div class="letter-effect">
            <div class="text" style="animation-delay: 0.5s">Прости меня за все.</div>
            <div class="text" style="animation-delay: 1.5s">За то, что не смог быть тем, кем ты хотела.</div>
            <div class="text" style="animation-delay: 2.5s">За то, что ушел таким образом.</div>
            <div class="text" style="animation-delay: 3.5s">За боль, которую причиняю тебе этим письмом.</div>
        </div>
    </div>

    <!-- Сцена 6 -->
    <div class="scene" id="scene6">
        <div class="letter-effect">
            <div class="text" style="animation-delay: 0.5s">Но я не мог больше.</div>
            <div class="text" style="animation-delay: 1.5s">Душевная боль становилась невыносимой.</div>
            <div class="text" style="animation-delay: 2.5s">Каждый день был борьбой, каждый день - пыткой.</div>
            <div class="text" style="animation-delay: 3.5s">И я выбрал покой.</div>
        </div>
    </div>

    <!-- Сцена 7 -->
    <div class="scene" id="scene7">
        <div class="letter-effect">
            <div class="text" style="animation-delay: 0.5s">Я не хочу, чтобы ты страдала.</div>
            <div class="text" style="animation-delay: 1.5s">Живи своей жизнью. Будь счастлива.</div>
            <div class="text" style="animation-delay: 2.5s">Найди того, кто подарит тебе то, чего я не смог.</div>
            <div class="text" style="animation-delay: 3.5s">Ты заслуживаешь всего самого лучшего.</div> 
        </div>
    </div>

    <!-- Сцена 8 -->
    <div class="scene" id="scene8">
        <div class="letter-effect">
            <div class="text" style="animation-delay: 0.5s">Прощай, моя любимая Анастасия.</div>
            <div class="text" style="animation-delay: 1.5s">Спасибо за все прекрасные моменты.</div>
            <div class="text" style="animation-delay: 2.5s">Спасибо за любовь, которая была.</div>
            <div class="text" style="animation-delay: 3.5s">Я всегда буду любить тебя...</div>
            <div class="divider" style="animation-delay: 4.5s"></div>
            <div class="text" style="text-align: center; animation-delay: 5s">Навсегда твой...</div>
        </div>
    </div>

    <!-- Финальная сцена -->
    <div class="final-scene" id="finalScene">
        <div class="letter-effect" style="border: none; background: none;">
            <div class="title" style="font-size: 1.5em; animation-delay: 0.5s">
                3 мая 2025 - 29 января 2026
            </div>
            <div class="title" style="margin-top: 20px; animation-delay: 1s">
                Здесь покоится любовь
            </div>
            <div class="epitaph">
                "Лучше сгореть, чем потухнуть"
            </div>
        </div>
        <div class="note">
            
        </div>
    </div>

    <script>
        let currentScene = 1;
        const totalScenes = 9; 
        const scenes = document.querySelectorAll('.scene');
        let touchStartX = 0;

        // Создание "слёз"
        function createTear() {
            const container = document.getElementById('tearsContainer');
            const tear = document.createElement('div');
            tear.className = 'tear';
            tear.innerHTML = '•';
            tear.style.left = Math.random() * 100 + 'vw';
            tear.style.animationDelay = Math.random() * 2 + 's';
            tear.style.fontSize = (Math.random() * 10 + 8) + 'px';
            container.appendChild(tear);
            
            setTimeout(() => tear.remove(), 3000);
        }

        function updateProgress() {
            const progress = (currentScene / totalScenes) * 100;
            document.getElementById('progress').style.width = progress + '%';
            const displayScene = currentScene <= 8 ? currentScene : 8;
            document.getElementById('sceneCounter').textContent = displayScene + '/8';
        }

        function changeScene(sceneNumber) {
            scenes.forEach(scene => scene.classList.remove('active'));
            document.getElementById('finalScene').classList.remove('active');
            
            if (sceneNumber === 9) {
                // Финальная сцена
                document.getElementById('finalScene').classList.add('active');
                
                setInterval(createTear, 300);
            } else if (sceneNumber <= 8) {
                const currentSceneElement = document.getElementById('scene' + sceneNumber);
                if (currentSceneElement) {
                    currentSceneElement.classList.add('active');
                    // Создаем "слёзы" для эмоциональных сцен
                    if ([2, 4, 5, 6, 7, 8].includes(sceneNumber)) {
                        setTimeout(createTear, 500);
                    }
                }
            }
            
            updateProgress();
        }

        function nextScene() {
            if (currentScene < totalScenes) {
                currentScene++;
                changeScene(currentScene);
            }
        }

        function prevScene() {
            if (currentScene > 1) {
                currentScene--;
                changeScene(currentScene);
            }
        }

        // Свайпы
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].screenX;
            const diffX = touchStartX - touchEndX;
            
            if (Math.abs(diffX) > 50) {
                if (diffX > 0) {
                    nextScene();
                } else {
                    prevScene();
                }
            }
        });

        // Клики и клавиши
        document.addEventListener('click', (e) => {
            if (!e.target.classList.contains('swipe-hint')) {
                nextScene();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') nextScene();
            if (e.key === 'ArrowLeft') prevScene();
        });

        // Инициализация
        updateProgress();
        // Первые "слёзы"
        setTimeout(createTear, 1000);
    </script>
</body>
</html>